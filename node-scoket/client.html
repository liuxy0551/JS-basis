<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>在线聊天室</title>
  </head>

  <body>
    <input type="text" id="text">
    <input type="button" id="btn" value="发送">
  </body>

  <script type="text/javascript" src="https://cdn.bootcss.com/socket.io/1.7.4/socket.io.min.js"></script>
  <script type="text/javascript">

    let socket = io.connect('/')

    let oText = document.getElementById('text')
    let oBtn = document.getElementById('btn')

    oBtn.onclick = function () {
      let val = oText.value

      // 通过实例发送消息
      socket.send(val)

      oText.value = ''
    }

    socket.on('message', data => {
      let p = document.createElement('p')
      p.innerText = data
      document.body.appendChild(p)
    })

  </script>
</html>
